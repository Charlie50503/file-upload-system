import{a as Q}from"./chunk-RWXNU4HG.js";import{b as y,d as k,i as W}from"./chunk-NX52VPAW.js";import{a as D,b as R,c as U,d as q,e as V,f as z,g as J}from"./chunk-K344CYY6.js";import{a as L,b as h,d as G,e as O,f as T,h as v,i as N,j,k as A,l as H}from"./chunk-C5B7UVBJ.js";import{a as X}from"./chunk-5VOPIKZM.js";import{c as I}from"./chunk-2T4LEDQ7.js";import{A as w,B as E,C as P,D as B,Z as K,z as x}from"./chunk-6SN4HNTV.js";import{Ab as M,Ha as c,Ia as n,Va as p,Xa as s,Yb as S,ab as t,bb as o,bc as F,ca as b,cb as C,db as f,eb as g,kb as d,wb as r,xb as _}from"./chunk-OBQHRRR6.js";function ee(a,i){a&1&&(f(0),r(1," \u8A72\u6B04\u4F4D\u5FC5\u586B "),g())}function te(a,i){a&1&&(f(0),r(1," \u8A72\u6B04\u4F4D\u5FC5\u586B "),g())}var Me=(()=>{let i=class i{constructor(l,m,e,u,Y,Z,$){this.router=l,this.dialogRef=m,this.userService=e,this.tokenService=u,this.route=Y,this.authService=Z,this.errorHandlerService=$,this.isLoginPasswordHide=!0,this.loginFormGroup=new T({email:new v("",{nonNullable:!0,validators:[h.required]}),password:new v("",{nonNullable:!0,validators:[h.required]})})}LoginUI(){if(this.loginFormGroup.invalid){this.loginFormGroup.markAllAsTouched();return}this.authService.authControllerSignIn({body:this.loginFormGroup.getRawValue()}).subscribe({next:l=>{this.userService.setUserInfo(l.data),this.tokenService.getAccessToken().setToken(l.data.token),this.router.navigate(["/home/file-management"])},error:this.errorHandlerService.handleRequestError.bind(this)})}};i.\u0275fac=function(m){return new(m||i)(n(k),n(K),n(Q),n(W),n(y),n(I),n(X))},i.\u0275cmp=b({type:i,selectors:[["app-login"]],standalone:!0,features:[M],decls:26,vars:5,consts:[[1,"h-screen","flex","justify-center","items-center","bg-primary-100"],["autocomplete","off",3,"formGroup"],["font","noto-medium",1,"mb-4","text-3xl","font-bold","text-center"],[1,"list-none","text-center"],[1,""],[1,"w-80"],["font","noto-medium"],["formControlName","email","matInput",""],[4,"ngIf"],["formControlName","password","matInput","","autocomplete","on",3,"type","keyup.enter"],["type","button","mat-icon-button","","matSuffix","",3,"click"],[1,"text-center"],["mat-fab","","color","primary","font","noto-regular","type","submit",1,"hover:opacity-80",3,"click"]],template:function(m,e){m&1&&(t(0,"div",0)(1,"form",1)(2,"h1",2),r(3," file manager "),o(),t(4,"ul",3)(5,"li",4)(6,"mat-form-field",5)(7,"mat-label",6),r(8,"Email"),o(),C(9,"input",7),t(10,"mat-error"),p(11,ee,2,0,"ng-container",8),o()()(),t(12,"li")(13,"mat-form-field",5)(14,"mat-label",6),r(15,"\u5BC6\u78BC"),o(),t(16,"input",9),d("keyup.enter",function(){return e.LoginUI()}),o(),t(17,"button",10),d("click",function(){return e.isLoginPasswordHide=!e.isLoginPasswordHide}),t(18,"mat-icon"),r(19),o()(),t(20,"mat-error"),p(21,te,2,0,"ng-container",8),o()()()(),t(22,"div",11)(23,"button",12),d("click",function(){return e.LoginUI(),!1}),t(24,"mat-icon"),r(25," login "),o()()()()()),m&2&&(c(),s("formGroup",e.loginFormGroup),c(10),s("ngIf",e.loginFormGroup.controls.email.hasError("required")),c(5),s("type",e.isLoginPasswordHide?"password":"text"),c(3),_(e.isLoginPasswordHide?"visibility_off":"visibility"),c(2),s("ngIf",e.loginFormGroup.controls.password.hasError("required")))},dependencies:[V,q,D,R,U,J,z,B,P,H,N,L,G,O,j,A,E,w,x,F,S],styles:["mat-form-field[_ngcontent-%COMP%]{font-size:1rem}.headerBar[_ngcontent-%COMP%]{padding:2px;width:100%;height:6vh;background-color:#ffdfa2;box-shadow:0 3px 5px #0003}.headerBar[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:85%}.loginFooter[_ngcontent-%COMP%]{font-size:.9rem;width:100%;position:fixed;bottom:0;background-color:#38373c;color:#d1d1d1;height:5vh}.loginFooterText[_ngcontent-%COMP%]:hover{color:#f6f2e9}.displayUnderLine[_ngcontent-%COMP%]{color:#d1d1d1;text-decoration:none}.loginBtn[_ngcontent-%COMP%]{background-color:#8c5549;color:#fff}.loginBtn[_ngcontent-%COMP%]:hover{color:#3a3a3a;background:#d6bb9c}.loginBtn2[_ngcontent-%COMP%]{background-color:#49598c;color:#fff}.loginBtn2[_ngcontent-%COMP%]:hover{color:#3a3a3a;background:#a6b5e9}"]});let a=i;return a})();export{Me as LoginComponent};
